{"ast":null,"code":"var _jsxFileName = \"/Users/raghavaggarwal/Desktop/team11_uq/src/App.jsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport './App.css';\nimport { PatientVisualizer } from 'fhir-visualizers';\nimport { useForm } from \"react-hook-form\";\nimport { Spinner, Container, Button, Form, Dropdown } from \"react-bootstrap\";\nexport default function App(props) {\n  const client = props.client;\n  const [patient, setPatient] = useState(null);\n  const [reportId, setReportId] = useState('');\n  const [observationId, setObservationId] = useState('');\n  const [selectedView, setSelectedView] = useState('');\n  const reports = useRef(null);\n  const observation = useRef(null);\n  const isDeletingReport = useRef(false);\n  const isCreatingReport = useRef(false);\n  const isViewingObservation = useRef(false);\n  const isViewingObservations = useRef(false);\n  const aiReport = useRef(null);\n  const isSendingAiRequest = useRef(false);\n  const formData = useRef(new FormData());\n  const getReports = () => {\n    client.patient.request(\"DiagnosticReport\").then(response => {\n      let studies = response.entry.map(entry => entry.resource);\n      reports.current = studies;\n    });\n  };\n  const getObservations = () => {\n    client.patient.request(\"Observation\").then(response => {\n      let observations = response.entry.map(entry => entry.resource);\n      console.log(observations);\n    });\n  };\n  const getObservation = () => {\n    client.request(`Observation?_id=${observationId}`).then(response => {\n      if (response.entry === undefined) {\n        observation.current = /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 31\n          }\n        }, \"No existing reports available.\");\n        return;\n      }\n      let observations = response.entry.map(entry => entry.resource);\n      observation.current = observations;\n    });\n  };\n  const handleSelect = view => {\n    setSelectedView(view);\n  };\n  const dropdownViews = [{\n    label: 'XR Chest AP',\n    loinc: '36572-6'\n  }, {\n    label: 'AP-Lateral',\n    loinc: '23456-7'\n  }, {\n    label: 'AP-Oblique',\n    loinc: '34567-8'\n  }, {\n    label: 'PA',\n    loinc: '45678-9'\n  }, {\n    label: 'XR Chest PA and Lateral',\n    loinc: '42272-5'\n  }, {\n    label: 'XR Chest PA+Lat+Obl',\n    loinc: '\t30744-7'\n  }, {\n    label: 'XR Chest Lat',\n    loinc: '39051-8'\n  }, {\n    label: 'XR Chest Obl',\n    loinc: '\t30740-5'\n  }];\n  useEffect(() => {\n    client.patient.read().then(patient => setPatient(patient));\n    if (reports.current === null) {\n      getReports();\n    }\n    if (isViewingObservation.current === true) {\n      getObservation();\n      isViewingObservation.current = false;\n    }\n    if (isViewingObservations.current === true) {\n      getObservations();\n      isViewingObservations.current = false;\n    }\n    if (isDeletingReport.current === true) {\n      client.delete(\"DiagnosticReport/\" + reportId);\n      console.log(\"Deleted report with id: \" + reportId);\n      reports.current = null;\n      isDeletingReport.current = false;\n    }\n\n    // TODO: Write algorithm to choose Create or Update\n\n    // Create/Update/Delete a DiagnosticReport\n    if (isCreatingReport.current === true) {\n      const diagnosticReport = {\n        \"resourceType\": \"DiagnosticReport\",\n        \"id\": \"1943319\",\n        \"status\": \"final\",\n        \"code\": {\n          \"coding\": [{\n            \"system\": \"http://loinc.org\",\n            \"code\": \"12345-6\",\n            \"display\": \"complete Blood Count\"\n          }],\n          \"text\": \"CBC Report\"\n        },\n        \"subject\": {\n          \"reference\": \"Patient/\" + client.patient.id\n        },\n        \"conclusionCode\": {\n          \"coding\": [{\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"123456789\",\n            \"display\": \"Anemia\"\n          }],\n          \"text\": \"Anemia\"\n        },\n        \"conclusion\": \"\",\n        // Put impression here\n        \"issued\": \"2023-10-06T10:00:00Z\"\n      };\n      client.create(diagnosticReport);\n      console.log(\"Created report\");\n      reports.current = null;\n      isCreatingReport.current = false;\n    }\n    //   /**\n    //    * For creating a DiagnosticReport under the patient id.\n    //    */\n\n    //   // client.update(diagnosticReport);\n\n    //   /**\n    //    * For deleting a DiagnosticReport, you need to know the id of the report.\n    //    */\n    //   client.delete(\"DiagnosticReport/1962062\");\n    //   isCreatingReport.current = true;\n\n    if (reports.current != null) {\n      // console.log(reports.current[0].code);\n    }\n    if (isSendingAiRequest.current === true) {\n      const requestOptions = {\n        method: 'POST',\n        body: formdata.current,\n        redirect: 'follow'\n      };\n      fetch('http://127.0.0.1/dicom_to_report', requestOptions).then(response => console.log(response))\n      // .then((data) => {\n      //   aiReport.current = data;\n      // })\n      .then(data => {\n        console.log(data);\n        // Now you can work with the response data\n        // aiReport.current = data;\n      }).then(message => console.log(message)).catch(error => console.log('error', error));\n    }\n  });\n  let pat = patient ? /*#__PURE__*/React.createElement(PatientVisualizer, {\n    patient: patient,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  });\n  const handleFileUpload = selectedFile => {\n    formdata.current.append('input_file', selectedFile, '1_IM-0001-4002.dcm');\n    isSendingAiRequest.current = true;\n  };\n  const createReport = () => {\n    isCreatingReport.current = true;\n  };\n  const deleteReport = () => {\n    isDeletingReport.current = true;\n  };\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const onSubmit = data => {\n    let np = patient;\n    np.name[0].given[0] = data.fname;\n    np.name[0].family = data.lname;\n    setPatient(np);\n    client.update(np);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, pat), patient ? /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, \"Update Patient Name\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"formFirst\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }, \"First\"), /*#__PURE__*/React.createElement(Form.Control, Object.assign({\n    type: \"text\"\n  }, register(\"fname\"), {\n    defaultValue: patient.name[0].given.join(' '),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"formLast\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 15\n    }\n  }, \"Last\"), /*#__PURE__*/React.createElement(Form.Control, Object.assign({\n    type: \"text\"\n  }, register(\"lname\"), {\n    defaultValue: patient.name[0].family,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, \"Update\"))) : \"\", /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, \"Diagnostic Reports\"), /*#__PURE__*/React.createElement(Dropdown, {\n    onSelect: handleSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n    variant: \"secondary\",\n    id: \"dropdown-basic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, \"Selected View: \", selectedView ? selectedView.label : \"Choose X-Ray View\"), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, dropdownViews.map((item, index) => /*#__PURE__*/React.createElement(Dropdown.Item, {\n    key: index,\n    eventKey: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 15\n    }\n  }, item.label)))), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: createReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  }, \"Create Report\")), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: reportId,\n    onChange: e => setReportId(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: deleteReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  }, \"Delete Report\")), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"fileInput\",\n    onChange: e => handleFileUpload(e.target.files[0]),\n    accept: \".dcm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }\n  }, \"Fetch API Report\"), /*#__PURE__*/React.createElement(\"pre\", {\n    id: \"apiResponse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, \"API response will be logged here\"), aiReport.current != null ?\n  /*#__PURE__*/\n  // aiReport.current.map((aiReporta, index) => (\n  //   <div key={index}>\n  //     <h5>Report {index + 1}</h5>\n  //     <pre>{JSON.stringify(aiReporta, null, 2)}</pre>\n  //   </div>\n  // ))\n  React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  }, JSON.stringify(aiReport.current, null, 2)) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 11\n    }\n  }, \"No existing reports available.\")), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }\n  }, \"Existing Diagnostic Report\"), reports.current != null ? reports.current.map((report, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, \"Report \", index + 1), /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  }, JSON.stringify(report, null, 2)))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }, \"No existing reports available.\")), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: observationId,\n    onChange: e => setObservationId(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }, \"Observation\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: () => isViewingObservation.current = true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, \"View Observation\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: () => isViewingObservations.current = true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 9\n    }\n  }, \"View Observations\")), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }\n  }, observation.current != null ? /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 11\n    }\n  }, JSON.stringify(observation.current, null, 2)) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 11\n    }\n  }, \"No existing observations available.\")));\n}\nfunction ReportViewer({\n  data\n}) {\n  const convertCamelCase = str => {\n    return str.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());\n  };\n  const renderData = (key, value) => {\n    if (Array.isArray(value)) {\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"pl-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 9\n        }\n      }, value.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }\n      }, typeof item === 'object' ? /*#__PURE__*/React.createElement(ReportViewer, {\n        data: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 43\n        }\n      }) : item)));\n    } else if (typeof value === 'object') {\n      return /*#__PURE__*/React.createElement(ReportViewer, {\n        data: value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 14\n        }\n      });\n    } else if (key === 'reference') {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 14\n        }\n      }, value); // dummy link\n    } else {\n      return value;\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }\n  }, Object.entries(data).map(([key, value]) => /*#__PURE__*/React.createElement(\"div\", {\n    key: key,\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }\n  }, convertCamelCase(key)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, renderData(key, value)))));\n}\n;","map":{"version":3,"names":["React","useEffect","useRef","useState","PatientVisualizer","useForm","Spinner","Container","Button","Form","Dropdown","App","props","client","patient","setPatient","reportId","setReportId","observationId","setObservationId","selectedView","setSelectedView","reports","observation","isDeletingReport","isCreatingReport","isViewingObservation","isViewingObservations","aiReport","isSendingAiRequest","formData","FormData","getReports","request","then","response","studies","entry","map","resource","current","getObservations","observations","console","log","getObservation","undefined","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","handleSelect","view","dropdownViews","label","loinc","read","delete","diagnosticReport","id","create","requestOptions","method","body","formdata","redirect","fetch","data","message","catch","error","pat","handleFileUpload","selectedFile","append","createReport","deleteReport","register","handleSubmit","formState","errors","onSubmit","np","name","given","fname","family","lname","update","Group","className","controlId","Label","Control","Object","assign","type","defaultValue","join","onSelect","Toggle","variant","Menu","item","index","Item","key","eventKey","onClick","value","onChange","e","target","files","accept","JSON","stringify","report","ReportViewer","convertCamelCase","str","replace","toUpperCase","renderData","Array","isArray","href","entries"],"sources":["/Users/raghavaggarwal/Desktop/team11_uq/src/App.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport './App.css';\nimport {PatientVisualizer} from 'fhir-visualizers';\nimport {useForm } from \"react-hook-form\";\nimport {Spinner, Container, Button, Form, Dropdown} from \"react-bootstrap\";\n\nexport default function App(props) {\n  const client = props.client;\n  const [patient, setPatient] = useState(null);\n  const [reportId, setReportId] = useState('');\n  const [observationId, setObservationId] = useState('');\n  const [selectedView, setSelectedView] = useState('');\n\n  const reports = useRef(null);\n  const observation = useRef(null);\n  const isDeletingReport = useRef(false);\n  const isCreatingReport = useRef(false);\n\n  const isViewingObservation = useRef(false);\n  const isViewingObservations = useRef(false);\n  const aiReport = useRef(null);\n  const isSendingAiRequest = useRef(false);\n  const formData = useRef(new FormData());\n\n  const getReports = () => {\n    client.patient.request(\"DiagnosticReport\")\n    .then(response => {\n      let studies = response.entry.map(entry => entry.resource);\n      reports.current = studies;\n    })\n  }\n\n  const getObservations = () => {\n    client.patient.request(\"Observation\")\n    .then(response => {\n      let observations = response.entry.map(entry => entry.resource);\n      console.log(observations);\n    })\n  }\n\n  const getObservation = () => {\n    client.request(`Observation?_id=${observationId}`)\n    .then(response => {\n      if (response.entry === undefined) {\n        observation.current = <p>No existing reports available.</p>;\n        return;\n      }\n      let observations = response.entry.map(entry => entry.resource);\n      observation.current = observations;\n    })\n  }\n\n  const handleSelect = (view) => {\n    setSelectedView(view);\n  };\n\n  const dropdownViews = [\n    { label: 'XR Chest AP', loinc: '36572-6' },\n    { label: 'AP-Lateral', loinc: '23456-7' },\n    { label: 'AP-Oblique', loinc: '34567-8' },\n    { label: 'PA', loinc: '45678-9' },\n    { label: 'XR Chest PA and Lateral', loinc: '42272-5' },\n    { label: 'XR Chest PA+Lat+Obl', loinc: '\t30744-7' },\n    { label: 'XR Chest Lat', loinc: '39051-8' },\n    { label: 'XR Chest Obl', loinc: '\t30740-5' },\n  ];\n\n  useEffect(() => {\n    client.patient.read().then((patient) => setPatient(patient));\n\n    if (reports.current === null) {\n      getReports();\n    }\n\n    if (isViewingObservation.current === true) {\n      getObservation();\n      isViewingObservation.current = false;\n    }\n\n    if (isViewingObservations.current === true) {\n      getObservations();\n      isViewingObservations.current = false;\n    }\n\n    if (isDeletingReport.current === true) {\n      client.delete(\"DiagnosticReport/\" + reportId);\n      console.log(\"Deleted report with id: \" + reportId);\n      reports.current = null;\n      isDeletingReport.current = false;\n    }\n\n// TODO: Write algorithm to choose Create or Update\n\n    // Create/Update/Delete a DiagnosticReport\n    if (isCreatingReport.current === true) {\n      const diagnosticReport = {\n        \"resourceType\": \"DiagnosticReport\",\n        \"id\": \"1943319\",\n        \"status\": \"final\",\n        \"code\": {\n          \"coding\": [\n            {\n              \"system\": \"http://loinc.org\",\n              \"code\": \"12345-6\",\n              \"display\": \"complete Blood Count\"\n            }\n          ],\n          \"text\": \"CBC Report\"\n        },\n        \"subject\": {\n          \"reference\": \"Patient/\" + client.patient.id,\n        },\n        \"conclusionCode\": {\n          \"coding\": [\n            {\n              \"system\": \"http://snomed.info/sct\",\n              \"code\": \"123456789\",\n              \"display\": \"Anemia\"\n            }\n          ],\n          \"text\": \"Anemia\"\n        },\n        \"conclusion\": \"\", // Put impression here\n        \"issued\": \"2023-10-06T10:00:00Z\"\n      };\n\n      client.create(diagnosticReport);\n      console.log(\"Created report\");\n      reports.current = null;\n      isCreatingReport.current = false;\n    }\n    //   /**\n    //    * For creating a DiagnosticReport under the patient id.\n    //    */\n\n    //   // client.update(diagnosticReport);\n\n    //   /**\n    //    * For deleting a DiagnosticReport, you need to know the id of the report.\n    //    */\n    //   client.delete(\"DiagnosticReport/1962062\");\n    //   isCreatingReport.current = true;\n\n    if (reports.current != null) {\n      // console.log(reports.current[0].code);\n    }\n\n    if (isSendingAiRequest.current === true) {\n      const requestOptions = {\n        method: 'POST',\n        body: formdata.current,\n        redirect: 'follow',\n      };\n  \n      fetch('http://127.0.0.1/dicom_to_report', requestOptions)\n        .then((response) => console.log(response))\n        // .then((data) => {\n        //   aiReport.current = data;\n        // })\n        .then((data) => {\n          console.log(data);\n          // Now you can work with the response data\n          // aiReport.current = data;\n        })\n        .then((message) => console.log(message))\n        .catch((error) => console.log('error', error));\n    }\n  });\n\n\n  let pat = patient ?\n    <PatientVisualizer patient={patient} />\n    : <Spinner />;\n\n  const handleFileUpload = (selectedFile) => {\n    formdata.current.append('input_file', selectedFile, '1_IM-0001-4002.dcm');\n    isSendingAiRequest.current = true;\n  }\n\n  const createReport = () => {\n    isCreatingReport.current = true;\n  }\n\n\n\n  const deleteReport = () => {\n    isDeletingReport.current = true;\n  }\n\n  const { register, handleSubmit, formState: { errors } } = useForm();\n  const onSubmit = data => {\n    let np = patient;\n    np.name[0].given[0] = data.fname;\n    np.name[0].family = data.lname;\n    setPatient(np);\n    client.update(np);\n  };\n\n  return (\n    <div id=\"app\">\n      <Container>\n        {pat}\n      </Container>\n      {patient ?\n        <Container>\n          <h4>Update Patient Name</h4>\n          <Form onSubmit={handleSubmit(onSubmit)}>\n            <Form.Group className=\"mb-3\" controlId=\"formFirst\">\n              <Form.Label>First</Form.Label>\n              <Form.Control type=\"text\" {...register(\"fname\")} defaultValue={patient.name[0].given.join(' ')} />\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"formLast\">\n              <Form.Label>Last</Form.Label>\n              <Form.Control type=\"text\" {...register(\"lname\")} defaultValue={patient.name[0].family} />\n            </Form.Group>\n            <Button type=\"submit\">Update</Button>\n          </Form>\n        </Container>\n        : \"\"}\n      <Container>\n        <br/>\n        <h4>Diagnostic Reports</h4>\n        <Dropdown onSelect={handleSelect}>\n          <Dropdown.Toggle variant=\"secondary\" id=\"dropdown-basic\">\n            Selected View: {selectedView ? selectedView.label : \"Choose X-Ray View\"}\n          </Dropdown.Toggle>\n          <Dropdown.Menu>\n            {dropdownViews.map((item, index) => (\n              <Dropdown.Item key={index} eventKey={item}>\n                {item.label}\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Menu>\n        </Dropdown>\n        <Button type=\"button\" className=\"btn btn-primary\" onClick={createReport}>Create Report</Button>\n      </Container>\n      <Container>\n        <input\n          type=\"text\"\n          value={reportId}\n          onChange={(e) => setReportId(e.target.value)}\n        />\n        <Button type=\"button\" className=\"btn btn-primary\" onClick={deleteReport}>Delete Report</Button>\n      </Container>\n      <Container>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          onChange={(e) => handleFileUpload(e.target.files[0])}\n          accept=\".dcm\"\n        />\n      </Container>\n\n      <Container>\n        <br />\n        <h4>Fetch API Report</h4>\n        <pre id=\"apiResponse\">API response will be logged here</pre>\n\n        {aiReport.current != null ? (\n          // aiReport.current.map((aiReporta, index) => (\n          //   <div key={index}>\n          //     <h5>Report {index + 1}</h5>\n          //     <pre>{JSON.stringify(aiReporta, null, 2)}</pre>\n          //   </div>\n          // ))\n          <pre>{JSON.stringify(aiReport.current, null, 2)}</pre>\n        ) : (\n          <p>No existing reports available.</p>\n        )}\n      </Container>\n\n      <Container>\n        <br />\n        <h5>Existing Diagnostic Report</h5>\n        {reports.current != null ? (\n          reports.current.map((report, index) => (\n            <div key={index}>\n              <h5>Report {index + 1}</h5>\n              <pre>{JSON.stringify(report, null, 2)}</pre>\n            </div>\n          ))\n        ) : (\n          <p>No existing reports available.</p>\n        )}\n      </Container>\n      <Container>\n        <input\n          type=\"text\"\n          value={observationId}\n          onChange={(e) => setObservationId(e.target.value)}\n        />\n        <h5>Observation</h5>\n        <Button type=\"button\" className=\"btn btn-primary\" onClick={() => isViewingObservation.current = true}>View Observation</Button>\n        <Button type=\"button\" className=\"btn btn-primary\" onClick={() => isViewingObservations.current = true}>View Observations</Button>\n      </Container>\n      <Container>\n        {observation.current != null ? (\n          <pre>{JSON.stringify(observation.current, null, 2)}</pre>\n        ) : (\n          <p>No existing observations available.</p>\n        )}\n      </Container>\n    </div>\n  );\n}\n\nfunction ReportViewer({ data }) {\n  const convertCamelCase = (str) => {\n    return str\n      .replace(/([A-Z])/g, ' $1')\n      .replace(/^./, (str) => str.toUpperCase());\n  };\n\n  const renderData = (key, value) => {\n    if (Array.isArray(value)) {\n      return (\n        <ul className=\"pl-3\">\n          {value.map((item, index) => (\n            <li key={index}>\n              {typeof item === 'object' ? <ReportViewer data={item} /> : item}\n            </li>\n          ))}\n        </ul>\n      );\n    } else if (typeof value === 'object') {\n      return <ReportViewer data={value} />;\n    } else if (key === 'reference') {\n      return <a href=\"#\">{value}</a>; // dummy link\n    } else {\n      return value;\n    }\n  };\n\n    return (\n      <div>\n        {Object.entries(data).map(([key, value]) => (\n          <div key={key} className=\"mb-2\">\n            <strong>{convertCamelCase(key)}</strong>\n            <div className=\"ml-3\">{renderData(key, value)}</div>\n          </div>\n        ))}\n      </div>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}